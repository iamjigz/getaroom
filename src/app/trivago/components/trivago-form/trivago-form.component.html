<div>
  <mat-card>
    <mat-card-header>
      <mat-card-title>Trivago Bid Compiler </mat-card-title>
      <mat-card-subtitle *ngIf="files.length === 0">Select Files to Merge</mat-card-subtitle>
      <mat-card-subtitle *ngIf="files.length > 0">{{ files.length }} files being merged...</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <mat-list>
        <h3 matSubheader *ngIf="table.data && table.data.length > 0">
          {{ table.data.length | number }} rows found from {{ completed === 0 ? '1' : completed  }} of
          {{ files.length }} files.
        </h3>
        <h3 matSubheader *ngIf="completed > 0 && completed === files.length">Merge complete</h3>
        <mat-list-item *ngFor="let file of files">
          <mat-icon color="accent" mat-list-icon>{{ file.inProgress ? 'check_circle_outline' : 'check_circle' }}
          </mat-icon>
          <div matLine>
            <h3>{{ file.data.name }}</h3>
          </div>
          <div matLine>
            <mat-progress-bar mode="determinate" color="primary" [value]="file.progress"></mat-progress-bar>
          </div>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="accent" (click)="onClick()">
        <mat-icon>publish</mat-icon>
        Upload
      </button>
    </mat-card-actions>
  </mat-card>
  <input type="file" #fileUpload id="fileUpload" name="fileUpload" multiple="multiple"
    accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
    style="display:none;" />

  <div class="content" *ngIf="table.data && table.data.length > 0">
    <app-trivago-table [displayedColumns]="displayedColumns"></app-trivago-table>
  </div>
</div>
